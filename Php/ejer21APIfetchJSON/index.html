<!DOCTYPE html>
<!--ejer de encriptaciÃ³n hecho con ajax. En este caso usando jquery-->
<html lang="es">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />


</head>
<body>
	<form id="formulario" method="post" action="./respuesta.php">
 
	  	<ul >
	  		
		    <li >
		        <label for="idUsuario">idUsuario</label><br />
		        <input id="idUsuario" name="idUsuario" value="12" />
		    </li>


		    <li>
		        <label for="loginDeUsuario">Login de Usuario</label><br />
		        <input type="text" id="loginDeUsuario" name="loginDeUsuario" value="valorggw" placeholder="Login"  />
		    </li>

		    <li>
		    	<label for="apellido">Apellido</label><br />
		        <input type="text" id="apellido" name="apellido"  value="Witt" placeholder="Apellido" />
		    </li>

	    </ul>
<input type="submit" value="enviar">

</form>

<button id="disparo">Disparador</button>





<script>

//const objFormulario = document.querySelector("#formulario");
//queryselector recibe un selector css como argumento de entrada. Es como usar
//document.getElementById()


/*
const datosFormulario = new URLSearchParams();
for (const pair of new FormData(objFormulario)) {
    datosFormulario.append(pair[0], pair[1]);
}
*/



/*
document.addEventListener("click",function() {
	for (const key of datosFormulario.keys()) {
		alert(value);
	}
	
});
*/
var objFormulario = document.getElementById("formulario");
document.getElementById("disparo").addEventListener('click',evento => {
	
	//Importante: lo que sigue debe estar aqui adentro para que tome los datos de
	//los inputs en el momento de pulsar el boton y no los que habia al cargar la 
	//pagina
	
	var datosFormulario = new FormData(objFormulario);

	console.log(datosFormulario);
	console.log(datosFormulario.get("idUsuario"));
	console.log(datosFormulario.get("loginDeUsuario"));
	console.log(datosFormulario.get("apellido"));
	
	objDatos = fetch('./respuesta.php', {
		method:'post',
		headers: {
        //"Content-Type": "application/x-www-form-urlencoded",
    	//"Content-Type": "multipart/form-data"
    	//"Content-Type": "application/json",
		},
		body: datosFormulario,
		Cache: 'default'
	})
	//.then(respuesta=>{return respuesta.text();})
	//.then(datos=>{console.log(datos);});
	.then(respuesta=>{return respuesta.json();})
	//.then(datos=>{console.log(datos.idUsuario);}); //retorna el objeto de datos
	//.then(datos=>{console.log(datos.idUsuario);}); //imprime idUsuario	
	//.then(respuesta=>{return respuesta.json();}) //retorna el objeto de datos
	//.then(datos=>{console.log(datos.loginDeUsuario);});//imprime logiDeUsuario
	//.then(respuesta=>{return respuesta.json();}) //retorna el objeto de datos
	//.then(datos=>{console.log(datos.apellido);}); //imprime apellido
	console.log(objDatos.loginDeUsuario);
	console.log(objDatos.apellido);
});
/*
fetch('url', {
  Method: 'POST',
  Headers: {
    Accept: 'application.json',
    'Content-Type': 'application/json'
  },
  Body: body,
  Cache: 'default'
})

*/






/*
function funcionDisparo() {
				
     fetch("http://localhost/prof/Php/ejer21APIfetchJSON/respuesta.php?ejer21APIfetchJSON?&idUsuario=ggw&loginDeUsuario=gwitt&apellido=Witt")
     		//devuelve objeto respuesta
            .then(respuesta=>{return respuesta.json();})
            	//el metodo json del objeto respuesta devuelve un objeto json  
            .then(datos=>{alert(datos.loginDeUsuario);});
}

document.getElementById("disparo").addEventListener("click",funcionDisparo);
*/

</script>
</body>
</html>