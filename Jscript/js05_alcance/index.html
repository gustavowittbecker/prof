<!DOCTYPE HTML >

<html>
<head>
<meta http-equiv="Content-Type" content="text/html" />
<meta charset="utf-8" />
<title>JS04_alcance.html</title>
<!-- Crear funcion que inicialice una variable global desde teclado (prompt) -->
<!-- Crear una función que visualice la variable global solo si esta fue inicializada-->

</head>
<body>

<button id="ivg_incorrecta" style="width:30%;margin:10px" title="Inicializa variable glogal desde adentro de una función con declaración var ">
Inicialización desde adentro de un procedimiento
</button>

<button id="ivg_correcta" style="width:30%;margin:10px" title="Inicializa variable glogal desde adentro de una función sin declaración var">
Inicialización forzada desde adentro de un procedimiento
</button>

<button id="mvg" style="width:30%;margin:10px">Muestra variable global</button>


<script> <!-- Al final para que el documento termine de cargar -->

var variableGlobal; /* la variable global es declarada por fuera de toda función*/
alert ("Una variableGlobal fue declarada pero no asignada");
alert("El valor de variableGlobal es: "+ variableGlobal);
alert("El tipo de variableGlobal es: "+ typeof variableGlobal);

//El tipo será undefined aunque ya haya sido declarada.
//Al haber sido solo declarada y no asignada la variableGlobal tiene valor undefined y tipo undefined.



/*Eventos. Se definiran funciones anonimas para determinados enventos.*/
/*Para esto se toma el objeto deseado que puede ser un boton y se le aplica el metodo addEventListener*/
/*A este metodo se le pasan como argumentos, el evento propiamente dicho y una función anónima a ejecutar en dicho evento*/
document.getElementById("ivg_correcta").addEventListener("click", function() {
	variableGlobal = prompt("Ingrese valor para la variable global: ");
	alert("El valor de variableGlobal es: " + variableGlobal);
	alert("El tipo de variableGlobal es: " + typeof variableGlobal);
});

/*La siguiente forma es la incorrecta ya que dentro de este procedimiento anonimo se usa la declaración var
lo cual hace que la variable tenga alcance solo local */
document.getElementById("ivg_incorrecta").addEventListener("click", function() {
	var variableGlobal = prompt("Ingrese valor para la variable global: ");
	alert("El valor de la variable local ingresada es: " + variableGlobal);
	alert("El tipo de la variable local ingresada es: " + typeof variableGlobal);
});

/*El siguiente evento llama a una función (muestra variable global) que solo muestra el valor de la variable pasada como argumento.*/
document.getElementById("mvg").addEventListener("click", function() {
if (variableGlobal!==undefined) {
	alert("valor de la variableGlobal: " + variableGlobal);
	alert("tipo de la variableGlobal: " + typeof variableGlobal);
}
else {
	alert("La variable global no ha sido asignada");
}
});

/*
CONCLUSION: 
Declarar las variables de uso global fuera de cualquier funcion.
Dentro de una función inclusive las anonimas usadas para handler de evento, las variables globales
 podrían llegar a ser asignadas pero solo de manera forzada (sin declarar con var)
*/

</script>

</body>
</html>
